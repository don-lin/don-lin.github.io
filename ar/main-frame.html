<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"> 
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    
	<!-- include three.js library -->
	<script src='js/three.js'></script>
	<!-- include jsartookit -->
	<script src="jsartoolkit5/artoolkit.min.js"></script>
	<script src="jsartoolkit5/artoolkit.api.js"></script>
	<!-- include threex.artoolkit -->
	<script src="threex/threex-artoolkitsource.js"></script>
	<script src="threex/threex-artoolkitcontext.js"></script>
	<script src="threex/threex-arbasecontrols.js"></script>
	<script src="threex/threex-armarkercontrols.js"></script>

    <script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
    <link rel="icon" type="image/jpg" href="imgs/favicon.jpg"/>
    <title>donlin's AR project</title>
 
    <link rel="stylesheet" href="css/frame-base.css">
    <link rel="stylesheet" href="css/frame-image.css">
    <link rel="stylesheet" href="css/animation.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
</head>

<body style='margin : 0px; overflow: hidden; font-family: Monospace;'>
    <div class="menu" hidden="hidden" onblur="console.log('aaaa')">
        <button>load</button><br>
        
        <button>save</button><br>
        <button>exit</button>
    </div>
 
      <div class="content">
           <div class="head">
                
                <button onclick="gameClick(this)"><span class="fa fa-file"> Game</span></button>

                <button onclick="editClick(this)"><span class="fa fa-pencil"> Edit</span></button>
                <button onclick="windowClick(this)"><span class="fa fa-window-maximize"> Window</span></button>
                <button onclick="dataClick(this)"><span class="fa fa-database"> Data</span></button>
           </div>
           <div class="container">
                <div class="left-group" hidden="hidden">
                    <p class="adjust-bar" hidden="hidden"><span class="fa fa-search-minus"></span> <input type="range"></input> <span class="fa fa-search-plus"></span></p>
                    <button title="select square" onclick="squareToolClick()"><span class="fa fa-square-o"></span></button><br>
                    <button title="select circle" onclick="circleToolClick()"><span class="fa fa-circle-o"></span></button><br>
                    <button title="select adjacent" onclick="adjacentToolClick()"><span class="fa fa-plus"></span></button><br>
                    <button title="select near" onclick="nearToolClick()"><span class="fa fa-cog"></span></button><br>
                    <button title="find similar color on the whole image" onclick="allToolClick()"><span class="fa fa-image"></span></button><br>
                    <button title="reset" onclick="resetToolClick()"><span class="fa fa-remove"></span></button><br>

                </div>
                <div class="mid-group">
                    <br><br><br><br><br><br><br>

                </div>
                <div class="right-group" hidden="hidden">
					<p>rooms</p>
                    <button>room 1</button>
                    <button>room 2</button>
                    <button>room 3</button>
                    <button>room 4</button>
                    <button>room 5</button>
                </div>
           </div>
           <div class="foot" hidden="hidden">
            <a href="#"><span class="fa fa-angle-left fa-5x"></span> </a>
            <img src="/img/input.jpg" class="small-img"></img>
            <img src="/img/input.jpg" class="mid-img"></img>
            <img src="/img/input.jpg" class="large-img"></img>
            <img src="/img/input.jpg" class="mid-img"></img>
            <img src="/img/input.jpg" class="small-img"></img>
            <a href="#"><span class="fa fa-angle-right fa-5x"></span> </a>

           </div>
      </div>
    
</body>
<script type="text/javascript" src="js/frame-main.js"></script>

<script>

var scene, camera, renderer, clock, deltaTime, totalTime;

var arToolkitSource, arToolkitContext;

var markerRoot1, markerRoot2;

var mesh1;

initialize();
animate();
//初始化
function initialize()
{
	scene = new THREE.Scene();

	let ambientLight = new THREE.AmbientLight( 0xcccccc, 0.5 );
	scene.add( ambientLight );
				
	camera = new THREE.Camera();
	scene.add(camera);

	renderer = new THREE.WebGLRenderer({
		antialias : true,
		alpha: true
	});
	renderer.setClearColor(new THREE.Color('lightgrey'), 0)
	renderer.setSize( 640, 480 );
	renderer.domElement.style.position = 'absolute'
	renderer.domElement.style.top = '0px'
	renderer.domElement.style.left = '0px'
	renderer.domElement.style.zIndex="-1"
	document.body.appendChild( renderer.domElement );

	clock = new THREE.Clock();
	deltaTime = 0;
	totalTime = 0;
	
	////////////////////////////////////////////////////////////
	// setup arToolkitSource
	////////////////////////////////////////////////////////////

	arToolkitSource = new THREEx.ArToolkitSource({
		sourceType : 'webcam',
	});

	function onResize()
	{
		arToolkitSource.onResize()	
		arToolkitSource.copySizeTo(renderer.domElement)	
		if ( arToolkitContext.arController !== null )
		{
			arToolkitSource.copySizeTo(arToolkitContext.arController.canvas)	
		}	
	}

	arToolkitSource.init(function onReady(){
		onResize()
	});
	
	// handle resize event
	window.addEventListener('resize', function(){
		onResize()
	});
	
	////////////////////////////////////////////////////////////
	// setup arToolkitContext
	////////////////////////////////////////////////////////////	

	// create atToolkitContext
	arToolkitContext = new THREEx.ArToolkitContext({
		cameraParametersUrl: 'data/camera_para.dat',
		detectionMode: 'mono'
	});
	
	// copy projection matrix to camera when initialization complete
	arToolkitContext.init( function onCompleted(){
		camera.projectionMatrix.copy( arToolkitContext.getProjectionMatrix() );
	});

	////////////////////////////////////////////////////////////
	// setup markerRoots
	////////////////////////////////////////////////////////////

	// build markerControls
	markerRoot1 = new THREE.Group();
	scene.add(markerRoot1);
	let markerControls1 = new THREEx.ArMarkerControls(arToolkitContext, markerRoot1, {
		type: 'pattern', patternUrl: "data/dl-img.patt",
	})

	let geometry1	= new THREE.CubeGeometry(1,1,1);
	let material1	= new THREE.MeshNormalMaterial({
		transparent: true,
		opacity: 0.5,
		side: THREE.DoubleSide
	}); 
	
	mesh1 = new THREE.Mesh( geometry1, material1 );
	mesh1.position.y = 0.5;
	
	markerRoot1.add( mesh1 );
}


function update()
{
	// update artoolkit on every frame
	if ( arToolkitSource.ready !== false )
		arToolkitContext.update( arToolkitSource.domElement );
}


function render()
{
	renderer.render( scene, camera );
}


function animate()
{
	requestAnimationFrame(animate);
	deltaTime = clock.getDelta();
	totalTime += deltaTime;
	update();
	render();
}
    
</script>

</html>